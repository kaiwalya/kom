---
layout: post
title: "this site is powered by..."
permalink: /how-it-works/
date:   2014-07-28 21:12:30
---


### source
All source code related to this website can be found at [https://github.com/kaiwalya/kom](https://github.com/kaiwalya/kom). You can clone this repository using using the following command...

	git clone https://github.com/kaiwalya/kom.git

### basic overview

1.	[HTML/Javascript/CSS code](https://github.com/kaiwalya/kom/tree/f/azure-site/www) is managed using [Jekyll](http://jekyllrb.com/).

1.	The pages generated by Jekyll are served using a [custom nodejs service](https://github.com/kaiwalya/kom/tree/f/azure-site/server.js) built on top of [express](http://expressjs.com/)

1.	This nodejs service is hosted at [https://kaiwalya-web.azurewebsites.net/](https://kaiwalya-web.azurewebsites.net/) using [Azure Websites](https://azure.microsoft.com/en-us/services/web-sites/) which provides free hosting.

1.	In addition to that there is an [Azure VM](https://azure.microsoft.com/en-us/services/virtual-machines/) which uses [Nginx](http://nginx.org/) as a reverse proxy to proxy traffic coming to kaiwalya.com to the Azure website. The SSL encryption certificates have been issued for free by [Start SSL](https://www.startssl.com)

1.	Finally [Route 53](http://aws.amazon.com/route53/) takes care of the DNS.

### Some helpful nginx configuration options used in this deployment

#### Redirect http to https

	server {
		listen 80;
		server_name kaiwalya.com;
		return       301 https://kaiwalya.com$request_uri;
	}

#### Redirect the "www" subdomain requests to the parent domain

	server {
		listen 443 ssl;
		server_name www.kaiwalya.com;
		ssl_certificate private/cert.pem;
		ssl_certificate_key private/key.pem;

		ssl_session_timeout 5m;

		ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
		ssl_ciphers "HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES";
		ssl_prefer_server_ciphers on;

		return       301 https://kaiwalya.com$request_uri;
	}


#### SSL Configuration and Reverse proxy

	server {
		listen 443 ssl;
		server_name kaiwalya.com;
		ssl_certificate private/cert.pem;
		ssl_certificate_key private/key.pem;

		ssl_session_timeout 5m;

		ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
		ssl_ciphers "HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES";
		ssl_prefer_server_ciphers on;

		location / {
			proxy_pass https://kaiwalya-web.azurewebsites.net:443;
		}
	}
